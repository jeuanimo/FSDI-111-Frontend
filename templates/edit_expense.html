{% extends "base.html" %} 

{% block title %}Edit Expense - Expense Manager{% endblock %}

{% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header bg-warning text-dark">
          <h4 class="mb-0">
            <i class="bi bi-pencil"></i> Edit Expense
          </h4>
        </div>
        <div class="card-body">
          <form action="/edit-expense/{{ expense.id }}" method="POST">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="description" class="form-label">Description</label>
                <input
                  type="text"
                  class="form-control"
                  id="description"
                  name="description"
                  value="{{ expense.description }}"
                  placeholder="What did you spend on?"
                  required
                />
              </div>
              <div class="col-md-6 mb-3">
                <label for="amount" class="form-label">Amount</label>
                <div class="input-group">
                  <span class="input-group-text">$</span>
                  <input
                    type="number"
                    step="0.01"
                    class="form-control"
                    id="amount"
                    name="amount"
                    value="{{ expense.amount }}"
                    placeholder="0.00"
                    required
                  />
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="category" class="form-label">Category</label>
                <select class="form-select" id="category" name="category" required>
                  <option value="">Select category...</option>
                  <option value="Food" {{ 'selected' if expense.category == 'Food' else '' }}>Food & Dining</option>
                  <option value="Transportation" {{ 'selected' if expense.category == 'Transportation' else '' }}>Transportation</option>
                  <option value="Housing" {{ 'selected' if expense.category == 'Housing' else '' }}>Housing</option>
                  <option value="Utilities" {{ 'selected' if expense.category == 'Utilities' else '' }}>Utilities</option>
                  <option value="Entertainment" {{ 'selected' if expense.category == 'Entertainment' else '' }}>Entertainment</option>
                  <option value="Healthcare" {{ 'selected' if expense.category == 'Healthcare' else '' }}>Healthcare</option>
                  <option value="Shopping" {{ 'selected' if expense.category == 'Shopping' else '' }}>Shopping</option>
                  <option value="Other" {{ 'selected' if expense.category == 'Other' else '' }}>Other</option>
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label for="date" class="form-label">Date</label>
                <input
                  type="date"
                  class="form-control"
                  id="date"
                  name="date"
                  value="{{ expense.date }}"
                  required
                />
              </div>
            </div>
            
            <div class="d-flex justify-content-between">
              <a href="/home" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Cancel
              </a>
              <div>
                <button type="submit" class="btn btn-warning text-dark">
                  <i class="bi bi-check-circle"></i> Update Expense
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Delete Section -->
      <div class="card mt-3">
        <div class="card-body bg-light">
          <h6 class="text-danger">
            <i class="bi bi-exclamation-triangle"></i> Danger Zone
          </h6>
          <p class="text-muted small mb-3">
            Once you delete an expense, there is no going back. Please be certain.
          </p>
          <form method="POST" action="/delete-expense/{{ expense.id }}" 
                onsubmit="return confirm('Are you ABSOLUTELY sure you want to delete this expense? This action cannot be undone.')">
            <button type="submit" class="btn btn-outline-danger">
              <i class="bi bi-trash"></i> Delete Expense
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}